<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Future of Education – Interactive Writing Game</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- SINGLE, VALID FORM (Netlify will POST then redirect to /thanks/) -->
  <form
    name="future-story"
    action="/thanks"
    method="POST"
    data-netlify="true"
    netlify-honeypot="bot-field"
    id="storyForm"
  >

    <!-- honeypot -->
    <div hidden aria-hidden="true">
      <label
        >Don’t fill this out:
        <input name="bot-field" type="text" />
      </label>
    </div>

    <input type="hidden" name="form-name" value="future-story" />

    <!--───────── UI ─────────-->
    <div class="game-container">

      <!-- centred title & subtitle -->
      <h1 style="text-align:center;">Education Futures</h1>

      <p style="text-align:center;">
        Write a speculative scenario about the future of education.  
        New rules will appear as you shape your story!
      </p>

      <!-- centred credit line -->
      <p style="font-size:.875rem;opacity:.8;text-align:center;">
        Created by
        <a
          href="https://www.kth.se/profile/gidiotis"
          target="_blank"
          rel="noopener"
          >Iosif Gidiotis</a
        >
        · Inspired by
        <a
          href="https://neal.fun/password-game/"
          target="_blank"
          rel="noopener"
          >The Password Game</a
        >
      </p>

      <div class="textarea-container">
        <textarea
          id="story-input"
          name="story"
          placeholder="Start writing your scenario here…"
          required
        ></textarea>

        <div class="word-count" id="word-count">0 words</div>

        <!-- centred inspiration hint -->
        <p style="font-size:.875rem;opacity:.8;text-align:center;">
          Need inspiration?
          <a
            href="https://www.kth.se/profile/gidiotis"
            target="_blank"
            rel="noopener"
            >click here</a
          >
        </p>
      </div>

      <div id="rules-list" class="rules-container"></div>

      <div id="email-container" style="display:none;">
        <label
          >Stay in touch (optional):
          <input
            type="email"
            id="email-input"
            name="email"
            placeholder="me@example.com"
        /></label>
      </div>

      <div id="completion-message" style="display:none;">
        <h2>Congratulations!</h2>
        <p>You've completed your scenario.</p>

        <button id="submit-button" class="button primary" type="submit">
          📨 Submit story
        </button>
        <button id="download-button" class="button" type="button">
          ⬇️ Download story
        </button>
        <button id="restart-button" class="button" type="button">
          🔄 Write another story
        </button>
      </div>
    </div>
    <!-- /.game-container -->
  </form>
  <!-- END single form -->

  <!-- inline tweaks for word counter / textarea -->
  <style>
    /* 1 ▸ positioning context */
    .textarea-container {
      position: relative;
    }
    /* 2 ▸ word counter placement */
    #word-count {
      position: absolute;
      bottom: 0.65rem;
      right: 1rem;
      font-size: 0.875rem;
      color: #2563eb;
      pointer-events: none;
    }
    /* 3 ▸ extra padding for textarea so text clears the counter */
    .textarea-container textarea {
      padding-right: 5.5rem;
      padding-bottom: 1.6rem;
    }
  </style>

  <script>
    /* store the story in localStorage just before leaving the page */
    document
      .getElementById('storyForm')
      .addEventListener('submit', () => {
        localStorage.setItem(
          'latestStory',
          document.getElementById('story-input').value
        );
      });
  </script>
  <script src="script.js"></script>
</body>
</html>
