<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Future of Education – Interactive Writing Game</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- SINGLE, VALID FORM (Netlify will POST then redirect to /thanks/) -->
  <form name="future-story"
        action="/thanks"                 
        method="POST"
        data-netlify="true"
        netlify-honeypot="bot-field"
        id="storyForm">

    <!-- honeypot -->
    <div hidden aria-hidden="true">
      <label>Don’t fill this out: <input name="bot-field"></label>
    </div>

    <input type="hidden" name="form-name" value="future-story">

    <!--───────── UI ─────────-->
    <div class="game-container">

      <h1>Future of Education</h1>
      <p>Write a speculative scenario about the future of education. New rules will appear as you write!</p>

      <div class="textarea-container">
        <textarea id="story-input" name="story"
                  placeholder="Start writing your scenario here…" required></textarea>
        <div id="word-count">0 words</div>
      </div>

      <div id="rules-list" class="rules-container"></div>

      <div id="email-container" style="display:none;">
        <label>Stay in touch (optional):
          <input type="email" id="email-input" name="email" placeholder="me@example.com">
        </label>
      </div>

      <div id="completion-message" style="display:none;">
        <h2>Congratulations!</h2>
        <p>You've completed your scenario.</p>

        <button id="submit-button"  class="button primary" type="submit">📨 Submit story</button>
        <button id="download-button" class="button" type="button">⬇️ Download Story</button>
        <button id="restart-button"  class="button" type="button">🔄 Write Another Story</button>
      </div>

    </div><!-- /.game-container -->
  </form><!-- END single form -->

  <style>
/* 1 ▸ the wrapper stays the positioning context */
.textarea-container{
  position:relative;
}

/* 2 ▸ word counter: slightly bigger offset */
#word-count{
  position:absolute;
  bottom:.65rem;      /* was .5rem  */
  right:1rem;         /* was .75rem */
  font-size:.875rem;
  color:#2563eb;
  pointer-events:none;/* text isn’t clickable */
}

/* 3 ▸ give the textarea bottom‑ and right‑padding so
      its content never collides with the counter      */
.textarea-container textarea{
  padding-right:5.5rem;  /* bump from 4.5rem */
  padding-bottom:1.6rem; /* add explicit bottom space */
}
</style>
  
  <script>
    /* store the story in localStorage just before leaving the page */
    document.getElementById('storyForm').addEventListener('submit', () => {
      localStorage.setItem('latestStory',
        document.getElementById('story-input').value);
    });
  </script>
  <script src="script.js"></script>
</body>
</html>
